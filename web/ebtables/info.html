<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>EBTABLES - InformaciÃ³n</title>
    
    <link rel="stylesheet" href="/web/00-css/ebtables/info.css">
</head>
<body>

<h3>ğŸ“– InformaciÃ³n del MÃ³dulo EBTABLES</h3>

<div class="info-section">
    <h4>ğŸŒ‰ Â¿QuÃ© es EBTABLES?</h4>
    <p>
        El mÃ³dulo <span class="highlight">EBTABLES</span> proporciona PVLAN (Private VLAN) a nivel de 
        <strong>capa 2 (enlace de datos)</strong> utilizando <code>ebtables</code> 
        (Ethernet Bridge Tables). Esto permite controlar el trÃ¡fico entre VLANs de manera mÃ¡s granular 
        que con iptables, actuando directamente sobre las tramas Ethernet.
    </p>
    
    <div class="info-box">
        <strong>â„¹ï¸ Diferencia con Firewall:</strong><br>
        â€¢ <strong>Firewall (iptables):</strong> Opera en capa 3 (red) - IP<br>
        â€¢ <strong>Ebtables:</strong> Opera en capa 2 (enlace) - Ethernet
    </div>
</div>

<div class="info-section">
    <h4>ğŸ”§ Funcionalidades</h4>
    <ul>
        <li><strong>ğŸ”’ Aislamiento por VLAN:</strong> Permite aislar cada VLAN de forma independiente</li>
        <li><strong>ğŸ“Š Control Granular:</strong> Cada VLAN tiene su propia cadena (VLAN_X_EBTABLES)</li>
        <li><strong>ğŸ”„ GestiÃ³n DinÃ¡mica:</strong> Aislar/desaislar VLANs en caliente</li>
        <li><strong>ï¿½ï¿½ Dependencia WAN:</strong> Verifica que WAN estÃ© activa antes de operar</li>
    </ul>
</div>

<div class="info-section">
    <h4>âš™ï¸ Arquitectura TÃ©cnica (Optimizada - RedirecciÃ³n por Interfaz)</h4>
    <p>El mÃ³dulo implementa una arquitectura optimizada que redirecciona trÃ¡fico por interfaz VLAN en FORWARD:</p>
    
    <div class="code-block">Lectura:
vlans.json â†’ VLANs vÃ¡lidas [1, 10, 20, 30]
tagging.json â†’ Interfaces â†’ [enxc84d44206f87, enxc84d4426b4ab, ...]

ConstrucciÃ³n:
VLAN 3 â†’ Interfaces [enxc84d44206f87]

Reglas en FORWARD:
ebtables -A FORWARD -i enxc84d44206f87 -j FORWARD_VLAN_3   (redirecciona VLAN 3)
ebtables -A FORWARD -i enxc84d4426b4ab -j FORWARD_VLAN_1   (redirecciona VLAN 1)
ebtables -A FORWARD -j DROP                                 (rechaza resto)

Reglas en FORWARD_VLAN_3 (cuando estÃ¡ AISLADA):
ebtables -A FORWARD_VLAN_3 -i eth0 -j ACCEPT               (permite WAN entrada)
ebtables -A FORWARD_VLAN_3 -o eth0 -j ACCEPT               (permite WAN salida)
(DROP implÃ­cito por default)</div>

    <p style="margin-top: 15px;"><strong>ValidaciÃ³n de SincronizaciÃ³n:</strong></p>
    <ul style="margin: 8px 0 0 20px;">
        <li>âœ… VLANs en tagging.json DEBEN existir en vlans.json</li>
        <li>âœ… Si una VLAN en tagging NO existe â†’ se registra warning y se ignora</li>
        <li>âœ… El mapa solo incluye VLANs vÃ¡lidas configuradas</li>
    </ul>

    <p style="margin-top: 15px;"><strong>Flujo de TrÃ¡fico (VLAN 3 AISLADA):</strong></p>
    <div class="info-box">
        <strong>Frame entra por enxc84d44206f87:</strong><br>
        1. EvaluaciÃ³n en FORWARD: -i enxc84d44206f87 -j FORWARD_VLAN_3 âœ“ COINCIDE<br>
        2. Redirecciona a FORWARD_VLAN_3<br>
        3. EvalÃºa: -i eth0 -j ACCEPT / -o eth0 -j ACCEPT<br>
        4. Si coincide â†’ âœ… PERMITIDO<br>
        5. Si no coincide â†’ âŒ BLOQUEADO (DROP implÃ­cito)<br>
        <br>
        <strong>Frame entra por otra interfaz:</strong><br>
        1. EvaluaciÃ³n en FORWARD: -i enxc84d4426b4ab -j FORWARD_VLAN_1 âœ— NO coincide<br>
        2. EvaluaciÃ³n en FORWARD: -j DROP âœ“ COINCIDE<br>
        3. âŒ BLOQUEADO
    </div>

    <p style="margin-top: 15px;"><strong>Ventajas de esta Arquitectura:</strong></p>
    <ul style="margin: 8px 0 0 20px;">
        <li>ğŸš€ <strong>Eficiente:</strong> Primero filtra por interfaz en FORWARD, luego reglas especÃ­ficas</li>
        <li>ğŸ¯ <strong>DinÃ¡mico:</strong> Se adapta automÃ¡ticamente a cambios en tagging.json</li>
        <li>âœ… <strong>Sincronizado:</strong> Valida que todas las VLANs existan</li>
        <li>ğŸ“Š <strong>Escalable:</strong> Maneja mÃºltiples interfaces por VLAN</li>
        <li>ğŸ”’ <strong>Seguro:</strong> DROP final en FORWARD rechaza interfaz desconocidas</li>
        <li>ğŸ§© <strong>Modular:</strong> Cada VLAN es independiente</li>
    </ul>
</div>

<div class="info-section">
    <h4>ğŸ“‹ Requisitos</h4>
    <ul>
        <li>âœ… El mÃ³dulo <span class="highlight">WAN</span> debe estar activo</li>
        <li>âœ… El mÃ³dulo <span class="highlight">VLANs</span> debe tener VLANs configuradas</li>
        <li>âœ… El paquete <code>ebtables</code> instalado en el sistema</li>
        <li>âœ… Permisos sudo configurados en <code>/etc/sudoers.d/jsbach</code></li>
    </ul>
    
    <div class="warning-box">
        <strong>âš ï¸ Advertencia:</strong> PVLAN (Private VLAN) puede interrumpir la comunicaciÃ³n 
        entre dispositivos. AsegÃºrate de comprender las implicaciones antes de aislar VLANs en producciÃ³n.
    </div>
</div>

<div class="info-section">
    <h4>ğŸš€ Uso BÃ¡sico</h4>
    <ol>
        <li><strong>Iniciar el mÃ³dulo:</strong> Click en "EBTABLES START"</li>
        <li><strong>Aislar VLAN:</strong> Ir a "CONFIGURAR AISLAMIENTO" â†’ Aislar</li>
        <li><strong>Desaislar VLAN:</strong> Usar botÃ³n "Desaislar"</li>
        <li><strong>Ver estado:</strong> Click en "EBTABLES STATUS"</li>
    </ol>
</div>

<div class="info-section">
    <h4>ğŸ“š Casos de Uso</h4>
    <ul>
        <li><strong>Seguridad IoT:</strong> Aislar dispositivos IoT para que solo accedan a Internet</li>
        <li><strong>Guest Networks:</strong> Aislar redes de invitados</li>
        <li><strong>SegmentaciÃ³n:</strong> Separar departamentos o funciones</li>
        <li><strong>Testing:</strong> Aislar segmentos para pruebas</li>
        <li><strong>Compliance:</strong> Cumplir requisitos (PCI-DSS, HIPAA)</li>
    </ul>
</div>

<div class="info-box">
    <strong>ğŸ’¡ Nota:</strong> Por defecto, todas las VLANs estÃ¡n <strong>NO AISLADAS</strong>. 
    Debes aislarlas explÃ­citamente segÃºn necesidad.
</div>

</body>
</html>
